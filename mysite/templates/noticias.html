{% extends 'base.html' %}
{% load static %}
{% block title %}Noticias | SEMARTEC{% endblock %}

{% block content %}
<div class="container my-4">
    <h1>Noticias</h1>
    <h3 class="mb-3 titulo-centro">Conoce más...</h3>

    <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-4">
        {% for n in noticias %}
        <div class="col">
            <div class="card h-100 shadow-sm news-card">
                <!-- IMAGEN CON ALTO UNIFORME (16:9) -->
                <div class="ratio ratio-16x9 card-img-top overflow-hidden">
                    {% if n.fotografia %}
                    <img src="{{ n.fotografia.url }}" style="width:300px; height:auto; border:3px solid red;">

                    <img src="{{ n.fotografia.url }}" alt="{{ n.titulo }}" class="img-cover" loading="lazy">
                    {% else %}
                    <img src="{% static 'img/placeholder.png' %}" alt="{{ n.titulo }}" class="img-cover" loading="lazy">
                    {% endif %}
                </div>

                <div class="card-body d-flex flex-column">
                    <h5 class="card-title title-clamp">{{ n.titulo }}</h5>
                    <p class="card-text desc-clamp">
                        {{ n.descripcion|striptags|truncatewords:25 }}
                    </p>

    <div class="mt-auto d-flex align-items-center justify-content-between">
    <small class="text-muted">{{ n.fecha_publicacion|date:"d/m/Y" }}</small>
    <button class="btn btn-sm btn-primary"
        data-bs-toggle="modal"
        data-bs-target="#modalNoticia_{{ n.pk }}">
        Leer más
    </button>
</div>
</div>
</div>
</div>
<!--MODAL NOTICIA COMPLETA-->

<div class="modal fade modal-animate" id="modalNoticia_{{ n.pk }}" tabindex="-1" aria-labelledby="modalNoticia_{{ n.pk }}Label" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 id="modalNoticia_{{ n.pk }}Label" class="modal-title">{{ n.titulo }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
                {% if n.fotografia %}
                <div class="ratio ratio-16x9 mb-3 overflow-hidden rounded">
                    <img src="{{ n.fotografia.url }}" alt="{{ n.titulo }}" class="img-cover">
                </div>
                {% endif %}
                <p class="text-muted small mb-2">
                    Publicado: {{ n.fecha_publicacion|date:"d/m/Y H:i" }}
                </p>
                <div class="modal-text">
                    {{ n.descripcion|linebreaks }}
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>





    {% empty %}
        <p>No hay noticia disponible.</p>
    {% endfor %}
  </div>
</div>
<!-- ===== ESTILOS ===== -->
<style>
/* ----------------------------------- */
/*        ESTILO GENERAL DE TITULOS    */
/* ----------------------------------- */

h1 {
    color: #4e87f7ff;
    font-weight: 800;
    text-align: center;
    margin-bottom: 10px;
}

.titulo-centro {
    text-align: center;
    font-weight: 600;
    color: #031120ff;
    margin-bottom: 25px;
}


/* ----------------------------------- */
/*   TARJETAS DE NOTICIAS MODERNAS     */
/* ----------------------------------- */

.news-card {
    border-radius: 18px;
    overflow: hidden;
    border: none;
    background: #ffffff;
    box-shadow: 0 5px 18px rgba(0,0,0,0.12);
    transition: transform .25s ease, box-shadow .3s ease;
}

.news-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 28px rgba(0,0,0,0.18);
}

/* Imagen estilo moderno */
.img-cover {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform .4s ease;
}

.news-card:hover .img-cover {
    transform: scale(1.07);
}


/* ----------------------------------- */
/*    CLAMP PARA TITULO Y DESCRIPCIÓN  */
/* ----------------------------------- */

.title-clamp {
    font-weight: 700;
    color: #0A66C2;
    line-height: 1.2;
    margin-bottom: 8px;
    display: -webkit-box;
    -webkit-line-clamp: 2; 
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.desc-clamp {
    color: #475569;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}


/* ----------------------------------- */
/*              BOTONES                */
/* ----------------------------------- */

.btn-primary {
    background: #0066ff !important;
    border: none !important;
    transition: background .3s ease, transform .2s ease;
}

.btn-primary:hover {
    background: #004fcc !important;
    transform: translateY(-2px);
}


/* ----------------------------------- */
/*              MODAL                  */
/* ----------------------------------- */

.modal-content {
    border-radius: 18px;
    box-shadow: 0 8px 28px rgba(0,0,0,0.25);
}

.modal-header {
    background: #f0f6ff;
    border-bottom: 2px solid #d3e3ff;
}

.modal-title {
    font-weight: 700;
    color: #0A66C2;
}

.modal-body {
    color: #1e293b;
}

.modal-animate {
    animation: fadeModal .35s ease;
}

@keyframes fadeModal {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
}


/* ----------------------------------- */
/*           HERO (si lo usas)         */
/* ----------------------------------- */

.hero-noticias {
    position: relative;
    background: url('{% static "img/images.jpg" %}') center/cover no-repeat;
    height: 300px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #ffffff;
    text-align: center;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
}

.hero-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.45);
}

.hero-title {
    font-size: 3rem;
    font-weight: 800;
    position: relative;
}

.hero-sub {
    font-size: 1.2rem;
    position: relative;
}

.link-inicio {
    text-decoration: underline;
    color: #dce8ff;
}

.link-inicio:hover {
    color: #ffffff;
}


/* ----------------------------------- */
/*          RESPONSIVE                 */
/* ----------------------------------- */

@media (max-width: 768px) {
    .hero-title {
        font-size: 2.2rem;
    }
    .hero-sub {
        font-size: 1rem;
    }
}



</style>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>



{% endblock %}
